{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/am-pc-14/Documents/pp/react_chat/chat-frontend/lib/api.ts"],"sourcesContent":["export const API_BASE = (process.env.NEXT_PUBLIC_API_URL || \"\").trim() || \"http://localhost:5000\";\n\n// log at runtime to help debug which backend URL the browser is using\ntry {\n  // eslint-disable-next-line no-console\n  console.log(\"API_BASE:\", API_BASE);\n} catch (e) {\n  // ignore server-side logging\n}\n\nexport async function signup(payload: { name: string; email: string; password: string }) {\n  const res = await fetch(`${API_BASE}/auth/signup`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok) throw { status: res.status, data };\n  return data;\n}\n\nexport async function login(payload: { email: string; password: string }) {\n  const res = await fetch(`${API_BASE}/auth/login`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok) throw { status: res.status, data };\n  return data;\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,WAAW,CAAC,QAAQ,GAAG,CAAC,mBAAmB,IAAI,EAAE,EAAE,IAAI,MAAM;AAE1E,sEAAsE;AACtE,IAAI;IACF,sCAAsC;IACtC,QAAQ,GAAG,CAAC,aAAa;AAC3B,EAAE,OAAO,GAAG;AACV,6BAA6B;AAC/B;AAEO,eAAe,OAAO,OAA0D;IACrF,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,YAAY,CAAC,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAC7C,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM;QAAE,QAAQ,IAAI,MAAM;QAAE;IAAK;IAC9C,OAAO;AACT;AAEO,eAAe,MAAM,OAA4C;IACtE,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,WAAW,CAAC,EAAE;QAChD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAC7C,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM;QAAE,QAAQ,IAAI,MAAM;QAAE;IAAK;IAC9C,OAAO;AACT"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///home/am-pc-14/Documents/pp/react_chat/chat-frontend/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, type FormEvent, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { login } from \"../../lib/api\";\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) router.replace(\"/\");\n  }, [router]);\n\n  async function handleSubmit(e: FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n    try {\n      const res = await login({ email, password });\n      if (res.token) {\n        // store token in localStorage for client usage\n        localStorage.setItem(\"token\", res.token);\n        if (res.user) {\n          localStorage.setItem('user', JSON.stringify(res.user));\n        }\n        // set a cookie so server-side middleware can detect authenticated users\n        // NOTE: this cookie is not HttpOnly. For production, set the cookie from the server with HttpOnly flag.\n        const maxAge = 60 * 60 * 24 * 7; // 7 days\n        document.cookie = `token=${res.token}; path=/; max-age=${maxAge}; samesite=Lax`;\n      }\n      router.replace(\"/\");\n    } catch (err: any) {\n      setError(err?.data?.message ?? (err?.status ? `Error ${err.status}` : \"Request failed\"));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-zinc-50 dark:bg-black\">\n      <main className=\"w-full max-w-md rounded-lg bg-white p-8 shadow dark:bg-[#0b0b0b]\">\n        <h1 className=\"mb-6 text-2xl font-semibold\">Sign in to your account</h1>\n        <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n          <label className=\"flex flex-col text-sm\">\n            <span className=\"mb-1\">Email</span>\n            <input\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              type=\"email\"\n              required\n              className=\"rounded-md border px-3 py-2\"\n            />\n          </label>\n          <label className=\"flex flex-col text-sm\">\n            <span className=\"mb-1\">Password</span>\n            <input\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              type=\"password\"\n              required\n              className=\"rounded-md border px-3 py-2\"\n            />\n          </label>\n          <button disabled={loading} className=\"mt-2 rounded-md bg-blue-600 px-4 py-2 text-white\">\n            {loading ? \"Signing in...\" : \"Sign in\"}\n          </button>\n        </form>\n        {error && <p className=\"mt-3 text-sm text-red-600\">{error}</p>}\n        <p className=\"mt-4 text-sm\">\n          Don't have an account? <Link href=\"/signup\" className=\"text-blue-600\">Sign up</Link>\n        </p>\n        <p className=\"mt-4 text-sm\">\n          <Link href=\"/\" className=\"text-zinc-600\">Back</Link>\n        </p>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,mKAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qOAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qOAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qOAAQ,EAAgB;IAElD,IAAA,sOAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO,OAAO,OAAO,CAAC;IAC5B,GAAG;QAAC;KAAO;IAEX,eAAe,aAAa,CAA6B;QACvD,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,uIAAK,EAAC;gBAAE;gBAAO;YAAS;YAC1C,IAAI,IAAI,KAAK,EAAE;gBACb,+CAA+C;gBAC/C,aAAa,OAAO,CAAC,SAAS,IAAI,KAAK;gBACvC,IAAI,IAAI,IAAI,EAAE;oBACZ,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,IAAI,IAAI;gBACtD;gBACA,wEAAwE;gBACxE,wGAAwG;gBACxG,MAAM,SAAS,KAAK,KAAK,KAAK,GAAG,SAAS;gBAC1C,SAAS,MAAM,GAAG,CAAC,MAAM,EAAE,IAAI,KAAK,CAAC,kBAAkB,EAAE,OAAO,cAAc,CAAC;YACjF;YACA,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,MAAM,WAAW,CAAC,KAAK,SAAS,CAAC,MAAM,EAAE,IAAI,MAAM,EAAE,GAAG,gBAAgB;QACxF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,kQAAC;QAAI,WAAU;kBACb,cAAA,kQAAC;YAAK,WAAU;;8BACd,kQAAC;oBAAG,WAAU;8BAA8B;;;;;;8BAC5C,kQAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,kQAAC;4BAAM,WAAU;;8CACf,kQAAC;oCAAK,WAAU;8CAAO;;;;;;8CACvB,kQAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,MAAK;oCACL,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAGd,kQAAC;4BAAM,WAAU;;8CACf,kQAAC;oCAAK,WAAU;8CAAO;;;;;;8CACvB,kQAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,MAAK;oCACL,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAGd,kQAAC;4BAAO,UAAU;4BAAS,WAAU;sCAClC,UAAU,kBAAkB;;;;;;;;;;;;gBAGhC,uBAAS,kQAAC;oBAAE,WAAU;8BAA6B;;;;;;8BACpD,kQAAC;oBAAE,WAAU;;wBAAe;sCACH,kQAAC,2LAAI;4BAAC,MAAK;4BAAU,WAAU;sCAAgB;;;;;;;;;;;;8BAExE,kQAAC;oBAAE,WAAU;8BACX,cAAA,kQAAC,2LAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAgB;;;;;;;;;;;;;;;;;;;;;;AAKnD"}}]
}